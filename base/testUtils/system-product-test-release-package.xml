<?xml version="1.0" encoding="utf-8"?>
<package name="system-product-tests">
    <inputs>
        <workingdir>/tmp/system-product-test-inputs</workingdir>
        <build-asset project="linuxep" repo="everest-base">
            <development-version branch="develop"/>
            <include artifact-path="sspl-base/SDDS-COMPONENT" dest-dir="sspl-base"/>
            <include artifact-path="sspl-base/system_test" dest-dir="SystemProductTestOutput"/>
        </build-asset>
        <build-asset project="linuxep" repo="sspl-plugin-edr-component">
            <development-version branch="develop"/>
            <include artifact-path="edr/SDDS-COMPONENT" dest-dir="sspl-edr-plugin"/>
        </build-asset>
        <build-asset project="linuxep" repo="sspl-plugin-mdr-component">
            <development-version branch="develop"/>
            <include artifact-path="mdr/SDDS-COMPONENT" dest-dir="sspl-mdr-control-plugin"/>
        </build-asset>
        <build-asset project="linuxep" repo="sspl-plugin-mdr-componentsuite">
            <development-version branch="develop"/>
            <include artifact-path="output" dest-dir="sspl-mdr-componentsuite"/>
        </build-asset>
        <build-asset project="linuxep" repo="sspl-plugin-edr-componentsuite">
            <development-version branch="develop"/>
            <include artifact-path="sspl-componentsuite/SDDS-SSPL-COMPONENT-SUITE" dest-dir="sspl-componentsuite"/>
        </build-asset>

        <package name="sspl-thininstaller"
                 version="develop/%LASTGOODCOMPONENTBUILD%/sspl-thininstaller/1.0.4/output"
                 dest="." buildtype="dev">
            <include src="." dest="sspl-thininstaller"/>
        </package>

<!--        <package name="sspl-thininstaller" version="develop/%LASTGOODCOMPONENTBUILD%/sspl-thininstaller/1.0.4/output" dest="." buildtype="dev">-->
<!--            <include src="."   dest="sspl-thininstaller" />-->
<!--        </package>-->

        <!--        <package name="sspl-thininstaller" version="sspl-thininstaller/1-0-6-5/220942/output" dest="." buildtype="prod">-->
        <!--            <include src="." dest="sspl-thininstaller"/>-->
        <!--        </package>-->

        <package name="sspl-exampleplugin" version="develop/%LASTGOODCOMPONENTBUILD%/sspl-exampleplugin/0.5.1/output"
                 dest="." buildtype="dev">
            <include src="SDDS-COMPONENT" dest="sspl-exampleplugin"/>
        </package>
        <package name="sspl-audit" version="master/%LASTGOODCOMPONENTBUILD%/sspl-audit/0.5.1/output" dest="." buildtype="dev">
            <include src="SDDS-COMPONENT"   dest="sspl-audit" />
        </package>
        <package name="sspl-eventprocessor" version="master/%LASTGOODCOMPONENTBUILD%/sspl-eventprocessor/0.5.1/output" dest="." buildtype="dev">
            <include src="SDDS-COMPONENT"   dest="sspl-eventprocessor" />
        </package>
        <package name="sspl-base" version="0-5-0-223/213552/output" dest=".">
            <include src="SDDS-COMPONENT" dest="sspl-base-0-5"/>
        </package>
        <package name="sspl-exampleplugin" version="0-5-0-43/213556/output" dest=".">
            <include src="SDDS-COMPONENT" dest="sspl-exampleplugin-0-5"/>
        </package>
        <package name="capnprotolinux11" version="0-7-0-29/213995/output" dest=".">
            <include src="capnproto.tar" dest="capnprotolinux11"/>
        </package>
        <package name="openssllinux11" version="1-1-1c-16/216598/output" dest=".">
            <include src="openssl.tar" dest="openssllinux11"/>
        </package>
        <package name="sspl-base" version="1-0-0-74/216976/output" dest=".">
            <include src="SDDS-COMPONENT" dest="sspl-base-1-0"/>
        </package>
        <package name="sspl-mdr-componentsuite" version="1-0-0-2/217070/output" dest=".">
            <include src="." dest="sspl-mdr-componentsuite-1-0"/>
        </package>
        <package name="savlinux9-package" version="10-5-0/217084/savlinux-package" dest=".">
            <include src="sav-linux-x86-aggregated-10.5.0.0.25.tgz" dest="savlinux9-package"/>
        </package>
<!--        <package name="liveterminal_linux" version="develop/%LASTGOODBUILD%/liveterminal_linux/1.2.0/output" dest="." buildtype="dev">-->
<!--            <include src="SDDS-COMPONENT"   dest="liveterminal" />-->
<!--        </package>-->
<!--        <package name="liveterminal" version="develop/%LASTGOODBUILD%/liveterminal/1.1/websocket_server/" dest="." buildtype="dev">-->
<!--            <include src="."   dest="websocket_server" />-->
<!--        </package>-->
        <build-asset project="winep" repo="liveterminal">
            <development-version branch="develop" />
            <include artifact-path="liveterminal/sdds" dest-dir="liveterminal" />
            <include artifact-path="websocket_server" dest-dir="websocket_server" />
        </build-asset>


<!--
            local warehouses
            when overriding a warehouse, do not change the customer dest-dir. only change the development-version and the
            warehouse dest-dir to contain the override branch name with /s replaced by -s
            The customer dest-dir matches up against constants set in WarehouseUtils.lib
-->
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="feature/LINUXDAR1939" />
            <include artifact-path="customer" dest-dir="local_warehouses/dev/sspl-warehouse/vut/warehouse/customer" />
            <include artifact-path="warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/feature/LINUXDAR1939/warehouse/warehouse" />
        </build-asset>
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="feature/Base-EDR-Only-OldWarehouseStyle" />
            <include artifact-path="customer" dest-dir="local_warehouses/dev/sspl-warehouse/old-style/warehouse/customer" />
            <include artifact-path="warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/feature-Base-EDR-Only-OldWarehouseStyle/warehouse/warehouse" />
        </build-asset>
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="feature/edr-999" />
            <include artifact-path="customer" dest-dir="local_warehouses/dev/sspl-warehouse/edr-999/warehouse/customer" />
            <include artifact-path="warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/feature-edr-999/warehouse/warehouse" />
        </build-asset>
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="feature/edr-999-mdr-999" />
            <include artifact-path="customer" dest-dir="local_warehouses/dev/sspl-warehouse/edr-mdr-999/warehouse/customer" />
            <include artifact-path="warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/feature-edr-999-mdr-999/warehouse/warehouse" />
        </build-asset>
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="feature/mdr-999" />
            <include artifact-path="customer" dest-dir="local_warehouses/dev/sspl-warehouse/mdr-999/warehouse/customer" />
            <include artifact-path="warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/feature-mdr-999/warehouse/warehouse" />
        </build-asset>
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="feature/latest-recommended-release" />
            <include artifact-path="customer" dest-dir="local_warehouses/dev/sspl-warehouse/latest-recommended/warehouse/customer" />
            <include artifact-path="warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/feature-latest-recommended-release/warehouse/warehouse" />
        </build-asset>
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="feature/only-beta" />
            <include artifact-path="customer" dest-dir="local_warehouses/dev/sspl-warehouse/only-beta/warehouse/customer" />
            <include artifact-path="warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/feature-only-beta/warehouse/warehouse" />
        </build-asset>
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="feature-paused-updating" />
            <include artifact-path="customer" dest-dir="local_warehouses/dev/sspl-warehouse/paused-updating/warehouse/customer" />
            <include artifact-path="warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/feature-paused-updating/warehouse/warehouse" />
        </build-asset>
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="feature/version-0-6-0-warehouse" />
            <include artifact-path="customer" dest-dir="local_warehouses/dev/sspl-warehouse/0-6-0/warehouse/customer" />
            <include artifact-path="warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/feature-version-0-6-0-warehouse/warehouse/warehouse" />
        </build-asset>
    </inputs>

    <publish>
        <workingdir>sspl-base-build</workingdir>
        <destdir>sspl-base</destdir>
        <buildoutputs>
            <output name="output" srcfolder="output" artifactpath="output"> </output>
            <output name="openssl" srcfolder="redist/openssl" artifactpath="openssl"> </output>
            <output name="build_log" srcfolder="log"> </output>
        </buildoutputs>
        <publishbranches>master,feature,release,develop,bugfix</publishbranches>
    </publish>
</package>
