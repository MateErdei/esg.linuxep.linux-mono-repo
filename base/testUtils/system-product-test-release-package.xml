<?xml version='1.0' encoding='utf-8'?>
<package name="system-product-tests">
    <inputs>
        <workingdir>/tmp/system-product-test-inputs</workingdir>
        <build-asset project="linuxep" repo="everest-base">
            <development-version branch="release--Version_1_1_9" build-id="20220111115616-63e343f79cd351f4b766d0f4697fff50969105d6-T8rvVv"/>
            <include mode="system-test,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="sspl-base/SDDS-COMPONENT" dest-dir="sspl-base"/>
            <include mode="system-test,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="sspl-base/system_test" dest-dir="SystemProductTestOutput"/>
            <include mode="system-test,ej-coverage,mdr-coverage,edr-coverage,lr-coverage,base-coverage" artifact-path="sspl-base-060/SDDS-COMPONENT" dest-dir="sspl-base-0-6-0"/>
            <include mode="base-coverage" artifact-path="sspl-base-coverage/SDDS-COMPONENT" dest-dir="sspl-base"/>
            <include mode="base-coverage" artifact-path="sspl-base-coverage/system_test" dest-dir="SystemProductTestOutput"/>
            <include mode="base-coverage" artifact-path="sspl-base-coverage/covfile" dest-dir="coverage"/>
        </build-asset>
        <build-asset project="linuxep" repo="sspl-plugin-edr-component">
            <development-version branch="release--version_1_1_5" build-id="20220125200542-816e9518ada05b441819e66a7e5699f448a1335b-sVF733"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,lr-coverage" artifact-path="edr/SDDS-COMPONENT" dest-dir="sspl-edr-plugin"/>
            <include mode="edr-coverage" artifact-path="sspl-edr-coverage/SDDS-COMPONENT" dest-dir="sspl-edr-plugin"/>
            <include mode="edr-coverage" artifact-path="sspl-edr-coverage/covfile" dest-dir="coverage"/>
        </build-asset>
         <build-asset project="linuxep" repo="capsule8-sensor">
            <development-version branch="release--version_4_10_0" build-id="20220126191215-c52a9bcc10f39b3ce68e907c944ce14c7c744398-p8tnVU"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,lr-coverage" artifact-path="SDDS-COMPONENT" dest-dir="sspl-runtimedetections-plugin"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,lr-coverage" artifact-path="sspl-rdrules" dest-dir="sspl-runtimedetections-plugin/content_rules"/>
<!--            <include mode="runtimedetections-coverage" artifact-path="sspl-runtimedetections-coverage/SDDS-COMPONENT" dest-dir="sspl-runtimedetections-plugin"/>-->
<!--            <include mode="runtimedetections-coverage" artifact-path="sspl-runtimedetections-coverage/covfile" dest-dir="coverage"/>-->
        </build-asset>
        <build-asset project="linuxep" repo="sspl-plugin-event-journaler">
            <development-version branch="release--version_1_0_1" build-id="20220112090118-a0b366a56367125c50b912ae16bdd69b1ba5b3ed-2pHh1A"/>
            <include mode="system-test,base-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="eventjournaler/SDDS-COMPONENT" dest-dir="sspl-plugin-event-journaler"/>
            <include mode="system-test,base-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="eventjournaler/manualTools" dest-dir="sspl-plugin-event-journaler-manual-tools"/>
            <include mode="ej-coverage" artifact-path="sspl-plugin-eventjournaler-coverage/manualTools" dest-dir="sspl-plugin-event-journaler-manual-tools"/>
            <include mode="ej-coverage" artifact-path="sspl-plugin-eventjournaler-coverage//SDDS-COMPONENT" dest-dir="sspl-plugin-event-journaler"/>
            <include mode="ej-coverage" artifact-path="sspl-plugin-eventjournaler-coverage/covfile" dest-dir="coverage"/>
        </build-asset>
        <build-asset project="linuxep" repo="sspl-plugin-anti-virus">
            <development-version branch="release--version_1_0_5" build-id="20220113110146-e13148f3347ef1dc284d5d2b955dadd3dfb8a049-1i4fP3"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="sspl-plugin-anti-virus/SDDS-COMPONENT" dest-dir="sspl-plugin-anti-virus"/>
        </build-asset>
        <build-asset project="linuxep" repo="sspl-plugin-mdr-component">
            <development-version branch="release/version_1_0_11" build-id="20220113162114-4a7ed31263a1ef3e450d3b2b6670e40482f67e36-TbhUu6"/>
            <include mode="system-test,base-coverage,ej-coverage,edr-coverage,lr-coverage" artifact-path="mdr/SDDS-COMPONENT" dest-dir="sspl-mdr-control-plugin"/>
            <include mode="mdr-coverage" artifact-path="mdr-coverage/SDDS-COMPONENT" dest-dir="sspl-mdr-control-plugin"/>
            <include mode="mdr-coverage" artifact-path="mdr-coverage/covfile" dest-dir="coverage"/>
        </build-asset>
        <build-asset project="linuxep" repo="sspl-plugin-mdr-componentsuite">
            <development-version branch="release--version_1_0_11" build-id="20220113170647-2046b6949bdddaaaab2ea763e98caae45ce778f0-X1b4m9"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="output/SDDS-SSPL-DBOS-COMPONENT" dest-dir="sspl-mdr-componentsuite/SDDS-SSPL-DBOS-COMPONENT"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="output/SDDS-SSPL-MDR-COMPONENT" dest-dir="sspl-mdr-componentsuite/SDDS-SSPL-MDR-COMPONENT"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="output/SDDS-SSPL-MDR-COMPONENT-SUITE" dest-dir="sspl-mdr-componentsuite/SDDS-SSPL-MDR-COMPONENT-SUITE"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="output-060/SDDS-SSPL-DBOS-COMPONENT" dest-dir="sspl-mdr-componentsuite-0-6-0/SDDS-SSPL-DBOS-COMPONENT"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="output-060/SDDS-SSPL-MDR-COMPONENT" dest-dir="sspl-mdr-componentsuite-0-6-0/SDDS-SSPL-MDR-COMPONENT"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="output-060/SDDS-SSPL-MDR-COMPONENT-SUITE" dest-dir="sspl-mdr-componentsuite-0-6-0/SDDS-SSPL-MDR-COMPONENT-SUITE"/>
        </build-asset>

        <build-asset project="linuxep" repo="sspl-plugin-edr-componentsuite">
            <development-version branch="release--Version_1_1_9" build-id="20220127170530-d0f7bea07e25da0d0caca61f778c6e4fa39ac327-U6ZibK"/>
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="sspl-componentsuite/SDDS-SSPL-COMPONENT-SUITE" dest-dir="sspl-componentsuite"/>
        </build-asset>
        <build-asset project="winep" repo="liveterminal">
            <development-version branch="release--version_1_5_1" build-id="20220113114734-2e0533633cdcbb4bd71c63f90217793804a2ed27-1IE4Bn" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage" artifact-path="liveterminal/sdds" dest-dir="liveterminal" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="websocket_server" dest-dir="websocket_server" />
            <include mode="lr-coverage" artifact-path="sspl-liveterminal-coverage/sdds" dest-dir="liveterminal" />
            <include mode="lr-coverage" artifact-path="linux/bullseye" dest-dir="coverage" />
        </build-asset>
        <build-asset project="linuxep" repo="thininstaller">
            <development-version branch="develop" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="output" dest-dir="sspl-thininstaller" />
        </build-asset>

        <!--        <package name="sspl-thininstaller" version="sspl-thininstaller/1-0-6-5/220942/output" dest="." buildtype="prod">-->
        <!--            <include src="." dest="sspl-thininstaller"/>-->
        <!--        </package>-->

        <trusted-asset artifact-path="filer5-migrate/openssllinux11/1-1-1c-16/216598/output/openssl.tar" dest-dir="./openssllinux11"/>

        <trusted-asset artifact-path="filer5-migrate/savlinux9-package/10-5-0/217084/savlinux-package/sav-linux-x86-aggregated-10.5.0.0.25.tgz" dest-dir="./savlinux9-package"/>

        <!--        pull the scripts from mono-repo to get the coverage uploaded to redash-->
        <build-asset project="em" repo="esg">
            <!-- release-version fetches for all branches with no development-version -->
            <development-version branch="release--bazeltools"/>
            <include mode="base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="bazel-tools" dest-dir="bazel-tools"/>
        </build-asset>

        <!--
                    local warehouses
                    when overriding a warehouse, do not change the customer dest-dir. only change the development-version and the
                    warehouse dest-dir to contain the override branch name with /s replaced by -s
                    The customer dest-dir matches up against constants set in WarehouseUtils.lib
        -->
        <build-asset project="linuxep" repo="sspl-warehouse">
            <development-version branch="test/2021-52-dtp2" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="develop/customer" dest-dir="local_warehouses/dev/sspl-warehouse/vut/warehouse/customer" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="develop/warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/develop/warehouse/warehouse" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="edr-999/customer" dest-dir="local_warehouses/dev/sspl-warehouse/edr-999/warehouse/customer" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="edr-999/warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/edr-999/warehouse/warehouse" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="base-999/customer" dest-dir="local_warehouses/dev/sspl-warehouse/base-999/warehouse/customer" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="base-999/warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/base-999/warehouse/warehouse" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="query-pack/customer" dest-dir="local_warehouses/dev/sspl-warehouse/query-pack/warehouse/customer" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="query-pack/warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/query-pack/warehouse/warehouse" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="edr-mdr-999/customer" dest-dir="local_warehouses/dev/sspl-warehouse/edr-mdr-999/warehouse/customer" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="edr-mdr-999/warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/edr-mdr-999/warehouse/warehouse" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="mdr-999/customer" dest-dir="local_warehouses/dev/sspl-warehouse/mdr-999/warehouse/customer" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="mdr-999/warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/mdr-999/warehouse/warehouse" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="0-6-0/customer" dest-dir="local_warehouses/dev/sspl-warehouse/0-6-0/warehouse/customer" />
            <include mode="system-test,base-coverage,ej-coverage,mdr-coverage,edr-coverage,lr-coverage" artifact-path="0-6-0/warehouse" dest-dir="local_warehouses/dev/sspl-warehouse/0-6-0/warehouse/warehouse" />
        </build-asset>
    </inputs>

    <publish>
        <workingdir>sspl-base-build</workingdir>
        <destdir>sspl-base</destdir>
        <buildoutputs>
            <output name="output" srcfolder="output" artifactpath="output"> </output>
            <output name="openssl" srcfolder="redist/openssl" artifactpath="openssl"> </output>
            <output name="build_log" srcfolder="log"> </output>
        </buildoutputs>
        <publishbranches>master,feature,release,develop,bugfix</publishbranches>
    </publish>
</package>
