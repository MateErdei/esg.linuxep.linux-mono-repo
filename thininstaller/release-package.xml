<?xml version='1.0' encoding='utf-8'?>
<package name="sspl-thininstaller" version="1.2.3">
    <versioning>
        <workingdir>sspl-thininstaller-build/AutoVersioningHeaders</workingdir>
    </versioning>
    <inputs>
        <workingdir>.</workingdir>
        <build-asset project="linuxep" repo="everest-base">
            <release-version branch="release--2023.1-thinstaller-only"
                             build-id="20230123103852-68072471670cee985b283e675d274ad15b11d371-nRSAvk"/>
            <development-version branch="develop"/>
            <include artifact-path="sspl-base/pluginapi" dest-dir="/build/input"/>
            <include artifact-path="sspl-base/cmcsrouterapi" dest-dir="/build/input"/>
            <include artifact-path="sspl-base/SDDS-COMPONENT" dest-dir="/build/input/base-sdds"/>
        </build-asset>
        <build-asset project="linuxep" repo="sul">
            <release-version branch="release/Version_1_0_1" build-id="20220822170900-3cc5f9a78dbbac072646d2b5379de43790212405-AR95mL"/>
            <development-version branch="develop"/>
            <include artifact-path="output" dest-dir="/build/input"/>
        </build-asset>
        <build-asset project="linuxep" repo="versig">
            <release-version branch="release/Version_2_0_0"
                             build-id="20220727094738-a99112d63f8fc2b87e53e7e69e687cf4fd890434-OYVMQC"/>
            <development-version branch="master"/>
            <include artifact-path="output" dest-dir="/build/input/"/>
        </build-asset>

        <build-asset project="em" repo="esg">
            <release-version branch="release/2023.04/sprint" build-id="20230120201925-31a0379094fc1654506d3d459661d326949dee47-bh0Sgz"/>
            <development-version branch="develop"/>

            <include artifact-path="thirdparty/zlib-linux-opt" dest-dir="/build/redist/zlib"/>
        </build-asset>

        <build-asset project="thirdparty" repo="boost">
            <release-version branch="release/sspl/Version_1_78_0"
                             build-id="20220310141901-bdae372a9027e1760f105dc819023a49ef444765-xdQFp9"/>
            <include artifact-path="output" dest-dir="/build/input"/>
        </build-asset>
        <build-asset project="thirdparty" repo="curl">
            <release-version branch="release/sspl/Version_7_84_0" build-id="20220822152212-f128f504bb954bd08e1b0f48fada7c5a73dc94f8-SnVSla"/>
            <include artifact-path="output" dest-dir="/build/input"/>
        </build-asset>
        <build-asset project="thirdparty" repo="gcc">
            <release-version branch="release/Version_11_2_0"
                             build-id="20220310091547-cf8f7ca9572a3bc9a68f05138086815341a49224-cZ84iF"/>
            <include artifact-path="output" dest-dir="/build/input"/>
        </build-asset>
        <build-asset project="thirdparty" repo="openssl">
            <release-version branch="release/sspl/Version_1_1_1q"
                             build-id="20220725102623-b49f6c504d454be8e7bc6a7dc7f7528b53920bdc-iF7TY0"/>
            <include artifact-path="output" dest-dir="/build/input"/>
        </build-asset>

        <build-asset project="em" repo="esg">
            <!-- Thirdparties are not on a release branch yet -->
<!--            <release-version branch="release/sophlib" build-id="20220713133804-bd190da51ebe34de00b9b24a2740d4aa3429edf0-x1dt3y"/>-->
            <development-version branch="develop"/>
            <include artifact-path="thirdparty/expat-linux-opt" dest-dir="/build/redist/expat"/>
        </build-asset>

        <trusted-asset artifact-path="filer5-migrate/pscerts/1-0-1/67228/ps_certificates/ps_rootca.crt"
                       dest-dir="/build/input/update_certs/."/>
        <trusted-asset artifact-path="org.cmake/cmake-3.26.0/cmake-3.26.0" dest-dir="/build/input/cmake"/>
    </inputs>

    <buildcommands>
        <command>
            <workingdir>.</workingdir>
            <program>/bin/bash</program>
            <args>./buildLinux.sh</args>
        </command>
    </buildcommands>
    <publish>
        <workingdir>.</workingdir>
        <release-asset artifact-path="output" source-dir="output" mode="release"/>
        <build-asset artifact-path="build_log" source-dir="log" mode="release,coverage"/>
    </publish>
</package>