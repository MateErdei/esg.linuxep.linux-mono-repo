#!/usr/bin/env groovy
@Library("tap-pipe")

def params = [
    booleanParam(name: 'run_tests', defaultValue: true, description: 'Run Test Automation in TAP'),
    booleanParam(name: 'run_sles', defaultValue: true, description: 'Run TAP on SLES 12/15'),
    booleanParam(name: 'run_ubuntu_22_04', defaultValue: true, description: 'Run TAP on Ubuntu 22.04'),
    string(name: 'UPSTREAM_CONTEXT', defaultValue: '{}', description: 'Information about the build which triggered this in JSON.'),
    choice(name: 'MODE', choices: ['release', 'coverage', 'analysis'], defaultValue: 'release', description: 'Build mode'),
    string(name: 'robot_test', defaultValue: '', description: 'Optional specific Robot test to run'),
    string(name: 'robot_suite', defaultValue: '', description: 'Optional specific Robot suite to run'),
]

CIPipeline { pipelineScriptPath = './pipeline/pipeline.py'; pipelineEntryPoint = 'event_journaler'; buildParameters = params }