<?xml version="1.0" encoding="utf-8"?>
<package name="sspl-template-plugin" version="1.0.0">
    <versioning>
        <workingdir>./products/distribution/include/AutoVersioningHeaders</workingdir>
    </versioning>

    <inputs>
        <workingdir>.</workingdir>
        <build-asset project="linuxep" repo="everest-base">
            <development-version branch="develop" />
            <include artifact-path="sspl-base/pluginapi" dest-dir="./input" />
            <include artifact-path="sspl-base/SDDS-COMPONENT" dest-dir="./input/base-sdds"/>
        </build-asset>

        <package name="cmakelinux" version="3-11-2-4/213056/cmakelinux" dest="input">
            <include src="cmake-3.11.2-linux.tar.gz" dest="."/>
        </package>
        <package name="gcclinux" version="8-1-0-43/213047/gcclinux" dest="input">
            <include src="gcc-8.1.0-linux.tar.gz" dest="."/>
        </package>
        <package name="googletest" version="1-8-1/EES-8928" dest="input">
            <include src="googletest-release-1.8.1.tar.gz" dest="."/>
        </package>
    </inputs>
    <buildcommands>
        <command mode="release">
            <program>/bin/bash</program>
            <args>./build.sh --clean --name sspl-template-plugin</args>
            <workingdir>.</workingdir>
        </command>
        <command mode="999">
            <program>/bin/bash</program>
            <args>./build.sh --clean --name sspl-template-plugin --999 --no-unit-test</args>
            <workingdir>.</workingdir>
        </command>
        <command mode="060">
            <program>/bin/bash</program>
            <args>./build.sh --clean --name sspl-template-plugin --060 --no-unit-test</args>
            <workingdir>.</workingdir>
        </command>
        <command mode="coverage">
            <program>/bin/bash</program>
            <args>./build.sh --clean --name sspl-template-plugin --bullseye</args>
        <workingdir>.</workingdir>
    </command>
    </buildcommands>
    <publish>
        <workingdir>.</workingdir>
        <build-asset artifact-path="sspl-plugin-template-coverage/SDDS-COMPONENT" source-dir="output/SDDS-COMPONENT" mode="coverage"/>
        <build-asset artifact-path="sspl-plugin-template-coverage/unittest-htmlreport" source-dir="output/coverage/sspl-plugin-template-unittest" mode="coverage"/>
        <build-asset artifact-path="sspl-plugin-template-coverage/symbols" source-dir="output/symbols" mode="coverage"/>
        <build-asset artifact-path="sspl-plugin-template-coverage/build_log" source-dir="output" mode="coverage">
            <include glob="./build.log" />
        </build-asset>
        <build-asset artifact-path="sspl-plugin-template-coverage/covfile" source-dir="output/" mode="coverage">
            <include glob="./*.cov"/>
        </build-asset>
        <release-asset artifact-path="template/SDDS-COMPONENT" source-dir="output/SDDS-COMPONENT" mode="release" />
        <release-asset artifact-path="template-999/SDDS-COMPONENT" source-dir="output/SDDS-COMPONENT" mode="999" />
        <release-asset artifact-path="template-060/SDDS-COMPONENT" source-dir="output/SDDS-COMPONENT" mode="060" />
        <build-asset artifact-path="symbols" source-dir="output/symbols" mode="release"/>
        <build-asset artifact-path="build_log" source-dir="output" mode="release">
            <include glob="./build.log" />
        </build-asset>
        <destdir>sspl-template-plugin</destdir>
        <publishbranches>develop,release,feature</publishbranches>
    </publish>
</package>
