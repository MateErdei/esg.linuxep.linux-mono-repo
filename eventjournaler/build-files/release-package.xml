<?xml version='1.0' encoding='utf-8'?>
<package name="sspl-event-journaler-plugin" version="1.0.1">
    <versioning>
        <workingdir>./products/distribution/include/AutoVersioningHeaders</workingdir>
    </versioning>

    <inputs>
        <workingdir>.</workingdir>
        <build-asset project="linuxep" repo="everest-base">
            <release-version branch="release/2022-09" build-id="20220221084824-ace4c3223c45f194d3441e496f06a60574f40232-uNLJJ9"/>
            <development-version branch="develop" />
            <include artifact-path="sspl-base/pluginapi" dest-dir="/build/input" />
            <include artifact-path="sspl-base/SDDS-COMPONENT" dest-dir="/build/input/base-sdds"/>
            <include artifact-path="sspl-base/fake-management" dest-dir="/build/input/fake-management"/>
        </build-asset>
        <build-asset project="winep" repo="sed">
            <release-version branch="release/SED_2022.09_libs" build-id="20220217194912-2bdf7d8503655d57176360807cbee0433bdb7488-mH1q6h" />
            <development-version branch="develop"/>
            <include artifact-path="sed-libs-linux/JournalLib-x64" dest-dir="/build/input"/>
            <include artifact-path="sed-libs-linux/JournalReader-x64" dest-dir="/build/input"/>
        </build-asset>

        <trusted-asset artifact-path="filer5-migrate/cmakelinux/3-11-2-4/213056/cmakelinux/cmake-3.11.2-linux.tar.gz" dest-dir="/build/input/."/>
        <trusted-asset artifact-path="filer5-migrate/gcclinux/8-1-0-43/213047/gcclinux/gcc-8.1.0-linux.tar.gz" dest-dir="/build/input/."/>
        <trusted-asset artifact-path="filer5-migrate/googletest/1-8-1/EES-8928/googletest-release-1.8.1.tar.gz" dest-dir="/build/input/."/>
        <trusted-asset artifact-path="filer5-migrate/capnprotolinux11/0-8-0-17/222740/capnproto/capnproto.tar" dest-dir="/build/input/."/>
        <trusted-asset artifact-path="filer5-migrate/xzutilslinux/5-2-4-25/222750/output/xzutils.tar" dest-dir="/build/input/."/>
    </inputs>
    <buildcommands>
        <command mode="release">
            <program>/bin/bash</program>
            <args>./build.sh --clean --name eventjournaler</args>
            <workingdir>.</workingdir>
        </command>
        <command mode="999">
            <program>/bin/bash</program>
            <args>./build.sh --clean --name eventjournaler --999 --no-unit-test</args>
            <workingdir>.</workingdir>
        </command>
        <command mode="060">
            <program>/bin/bash</program>
            <args>./build.sh --clean --name eventjournaler --060 --no-unit-test</args>
            <workingdir>.</workingdir>
        </command>
        <command mode="coverage">
            <program>/bin/bash</program>
            <args>./build.sh --clean --name eventjournaler --bullseye</args>
        <workingdir>.</workingdir>
        </command>
        <command mode="analysis">
            <program>/bin/bash</program>
            <args>./build.sh --no-build --name sspl-template-plugin --analysis</args>
            <workingdir>.</workingdir>
        </command>
    </buildcommands>
    <publish>
        <workingdir>.</workingdir>
        <!--   Release outputs   -->
        <release-asset artifact-path="eventjournaler/SDDS-COMPONENT" source-dir="output/SDDS-COMPONENT" mode="release" />

        <!--   non-release outputs   -->
        <build-asset artifact-path="eventjournaler/manualTools" source-dir="output/manualTools" mode="release" />
        <build-asset artifact-path="base/base-sdds" source-dir="output/base-sdds" mode="release"/>
        <build-asset artifact-path="base/fake-management" source-dir="output/fake-management" mode="release"/>
        <build-asset artifact-path="symbols" source-dir="output/symbols" mode="release"/>
        <build-asset artifact-path="build_log" source-dir="output" mode="release">
            <include glob="./build.log" />
        </build-asset>

        <!--   999, 060 outputs   -->
        <release-asset artifact-path="eventjournaler-999/SDDS-COMPONENT" source-dir="output/SDDS-COMPONENT" mode="999" />
        <release-asset artifact-path="eventjournaler-060/SDDS-COMPONENT" source-dir="output/SDDS-COMPONENT" mode="060" />


        <!--   Coverage outputs   -->
        <build-asset artifact-path="sspl-plugin-eventjournaler-coverage/SDDS-COMPONENT" source-dir="output/SDDS-COMPONENT" mode="coverage"/>
        <release-asset artifact-path="sspl-plugin-eventjournaler-coverage/manualTools" source-dir="output/manualTools" mode="coverage" />
        <build-asset artifact-path="sspl-plugin-eventjournaler-coverage/unittest-htmlreport" source-dir="output/coverage/sspl-plugin-eventjournaler-unittest" mode="coverage"/>
        <build-asset artifact-path="sspl-plugin-eventjournaler-coverage/symbols" source-dir="output/symbols" mode="coverage"/>
        <build-asset artifact-path="sspl-plugin-eventjournaler-coverage/base/base-sdds" source-dir="output/base-sdds" mode="coverage"/>
        <build-asset artifact-path="sspl-plugin-eventjournaler-coverage/base/fake-management" source-dir="output/fake-management" mode="coverage"/>
        <build-asset artifact-path="sspl-plugin-eventjournaler-coverage/build_log" source-dir="output" mode="coverage">
            <include glob="./build.log" />
        </build-asset>
        <build-asset artifact-path="sspl-plugin-eventjournaler-coverage/covfile" source-dir="output/" mode="coverage">
            <include glob="./*.cov"/>
        </build-asset>
        <destdir>sspl-plugin-event-journaler</destdir>
        <publishbranches>develop,release,feature</publishbranches>
    </publish>
</package>
