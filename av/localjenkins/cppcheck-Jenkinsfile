def PLUGIN_NAME = "sspl-plugin-mav"

environment {
    PLUGIN_NAME = "${PLUGIN_NAME}"
}

pipeline {
    agent {
        node {
            label 'sav-cppcheck'
            customWorkspace "${PLUGIN_NAME}/${BRANCH_NAME}"
        }
    }
    stages {
        stage('cppcheck') {
            steps {
                sh 'cppcheck --inline-suppr --std=c++11 --xml --xml-version=2 modules products 2> cppcheck.xml'
                publishCppcheck pattern:'cppcheck.xml'
            }
        }
    }
}
